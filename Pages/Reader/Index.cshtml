@page "{id:int?}"
@model Pages.ReaderModel

@{
    ViewData["Title"] = "Reader";
}

<!-- Main Content -->


<!-- Chapter Content -->

<div class="reader-header-content">
    <button id="open-toc" class="btn btn-ghost">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="3" x2="21" y1="6" y2="6" />
            <line x1="3" x2="21" y1="12" y2="12" />
            <line x1="3" x2="21" y1="18" y2="18" />
        </svg>
        <span class="sm-hidden">Chapters</span>
    </button>

    <div class="reader-title">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20" />
        </svg>
        <span id="current-chapter-title" class="title">@Model.CurrentChapterTitle</span>
        <span id="chapter-indicator" class="count">(@Model.PageNumber/@Model.TotalPages)</span>
    </div>

    <div class="reader-nav">
        <button id="prev-chapter-top" class="btn btn-ghost btn-icon" @(Model.HasPreviousPage ? "" : "disabled")>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="m15 18-6-6 6-6" />
            </svg>
        </button>
        <button id="next-chapter-top" class="btn btn-ghost btn-icon" @(Model.HasNextPage ? "" : "disabled")>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="m9 18 6-6-6-6" />
            </svg>
        </button>
    </div>
</div>
<article class="chapter-content">
    <h1 id="chapter-title">@(Model.CurrentChapterTitle ?? "Chapter Title")</h1>
    <div id="chapter-body" class="prose">
        @if (Model.Paragraphs is null || Model.Paragraphs.Count == 0)
        {
            <p>Loading chapter content...</p>
        }
        else
        {
            foreach (var paragraph in Model.Paragraphs)
            {
                <p>@paragraph.Content</p>
            }
        }

    </div>
</article>

<!-- Reader Footer -->
<footer class="reader-footer">
    <div class="reader-footer-content">
        <button id="prev-chapter-bottom" class="btn btn-outline" @(Model.HasPreviousPage ? "" : "disabled")>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="m15 18-6-6 6-6" />
            </svg>
            Previous
        </button>

        <span id="footer-indicator" class="chapter-indicator">Chapter @Model.PageNumber of @Model.TotalPages</span>

        <button id="next-chapter-bottom" class="btn btn-outline" @(Model.HasNextPage ? "" : "disabled")>
            Next
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="m9 18 6-6-6-6" />
            </svg>
        </button>
    </div>
</footer>

<script src="/js/reader.js"></script>